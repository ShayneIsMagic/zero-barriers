---
const { title, description } = Astro.props;
const gtmId = import.meta.env.PUBLIC_GTM_ID || "";
const gtmScript = `
        (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
        })(window, document, "script", "dataLayer", "${gtmId}");`;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    
    <!-- SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="author" content="Zero Barriers" />
    <meta name="keywords" content="revenue growth, rapid growth, substantial growth, sustainable growth, revenue generation, rev gen, business transformation, sales optimization, revenue acceleration, human transformation, technology enablement, business consulting, growth strategy, sales methodology, purpose-driven business, revenue growth consultancy, business breakthrough, sales process optimization, KPI management, continuous improvement, organizational development, leadership development, team alignment, strategic consulting, revenue operations, RevOps, sales training, customer success, business scaling, revenue systems, growth engineering, business barriers, transformation assessment, revenue growth methodology, rapid revenue growth, substantial revenue growth, sustainable revenue growth, revenue growth consulting, revenue growth services, SalesforceConsultants.io, DevPipeline, custom software development, Salesforce implementation, CRM optimization, workflow management, integration, automation, technology partnerships" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://zerobarriers.io" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="https://zerobarriers.io/images/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Zero Barriers" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@zerobarriers" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content="https://zerobarriers.io/images/twitter-card.jpg" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://zerobarriers.io" />
    
    <!-- Additional SEO Links -->
    <link rel="alternate" type="application/rss+xml" title="Zero Barriers RSS Feed" href="https://zerobarriers.io/rss.xml" />
    <link rel="alternate" type="application/json" title="Zero Barriers JSON Feed" href="https://zerobarriers.io/feed.json" />
    
    <!-- Preconnect to Google Analytics -->
    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="preconnect" href="https://analytics.google.com" />
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin />
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="https://www.google-analytics.com" />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/js/main.js" as="script" />
    <link rel="preload" href="/styles/main.css" as="style" />
    
    <!-- Load CSS -->
    <link rel="stylesheet" href="/styles/main.css" />
    
    <!-- Critical CSS for above-the-fold content -->
    <style>
      :root {
        --primary: #7cc347;
        --primary-dark: #167a1f;
        --primary-light: rgba(37, 197, 54, 0.1);
        --secondary: #58595b;
        --black: #000000;
        --white: #ffffff;
        --light-gray: #f5f5f5;
        --dark-gray: #333333;
        --accent: #2c88d9;
        --transition: all 0.3s ease;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }
      
      body {
        background-color: var(--white);
        color: var(--secondary);
        line-height: 1.6;
        overflow-x: hidden;
      }
      
      .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        position: relative;
        z-index: 2;
      }
      
      header {
        background-color: var(--white);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
      }
      
      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
      }
      
      .logo {
        font-size: 22px;
        font-weight: 700;
        color: var(--black);
        display: flex;
        align-items: center;
      }
      
      .logo span {
        color: var(--primary);
        margin-left: 5px;
      }
      
      .nav-links {
        display: flex;
        gap: 30px;
      }
      
      .nav-links a {
        position: relative;
        color: var(--black);
        font-weight: 500;
        transition: var(--transition);
      }
      
      .nav-links a:hover {
        color: var(--primary);
      }
      
      .cta-button {
        background-color: var(--primary-dark);
        color: var(--white);
        padding: 12px 24px;
        border-radius: 4px;
        font-weight: 600;
        transition: var(--transition);
        display: inline-block;
        text-align: center;
        border: none;
      }
      
      .mobile-menu-toggle {
        display: none;
        cursor: pointer;
        font-size: 24px;
      }
      
      .hero {
        background: linear-gradient(135deg, var(--white) 0%, #f9f9f9 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding: 120px 0 80px;
        position: relative;
        overflow: hidden;
      }
      
      .hero-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 60px;
        align-items: center;
      }
      
      .hero-title {
        font-size: 48px;
        font-weight: 800;
        color: var(--black);
        line-height: 1.2;
      }
      
      .hero-description {
        font-size: 16px;
        color: var(--secondary);
        margin-bottom: 10px;
        font-weight: 300;
      }
      
      @media (max-width: 768px) {
        .mobile-menu-toggle {
          display: block !important;
        }
        
        .nav-links {
          display: none;
        }
        
        .hero-container {
          grid-template-columns: 1fr;
          gap: 40px;
        }
        
        .hero-title {
          font-size: 32px;
        }
      }
    </style>
    
    <title>{title}</title>
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Zero Barriers",
      "url": "https://zerobarriers.io",
      "logo": "https://zerobarriers.io/zblogo.png",
      "description": "Zero Barriers - Revenue Growth Consultancy. We dominate revenue growth with proven methodologies that deliver rapid, substantial, and sustainable results. Expert revenue generation and business transformation services.",
      "foundingDate": "2020",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "US"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "url": "https://zerobarriers.io/contact"
      },
      "sameAs": [
        "https://www.linkedin.com/company/zero-barriers",
        "https://twitter.com/zerobarriers"
      ],
      "serviceType": [
        "Revenue Growth Consulting",
        "Rapid Revenue Growth",
        "Substantial Revenue Growth", 
        "Sustainable Revenue Growth",
        "Revenue Generation",
        "Business Transformation",
        "Sales Optimization",
        "Technology Enablement",
        "Human Transformation"
      ],
      "areaServed": "Worldwide",
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Zero Barriers Services",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Human Transformation",
              "description": "Purpose-driven methodologies and proprietary frameworks for unlocking potential"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Technology Enablement",
              "description": "Strategic technology solutions to streamline operations and enhance customer experiences"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Revenue Acceleration",
              "description": "Systems that generate predictable, sustainable revenue growth"
            }
          }
        ]
      },
      "hasPartnership": [
        {
          "@type": "Organization",
          "name": "Zero Barriers CRM Solutions",
          "url": "https://salesforceconsultants.io/",
          "description": "A Zero Barriers technology division delivering 40% average ROI improvement through expert Salesforce implementation and optimization services",
          "areaServed": "Utah, California, Surrounding Areas"
        },
        {
          "@type": "Organization", 
          "name": "Zero Barriers Custom Development",
          "url": "https://www.devpipeline.com/software-solutions",
          "description": "A Zero Barriers technology division providing custom software development, integration, automation, and workflow management solutions with 30+ years of experience",
          "areaServed": "Utah, California, Surrounding Areas"
        }
      ],
      "@type": "LocalBusiness",
      "address": {
        "@type": "PostalAddress",
        "addressRegion": "Utah",
        "addressCountry": "US"
      },
      "serviceArea": {
        "@type": "GeoCircle",
        "geoMidpoint": {
          "@type": "GeoCoordinates",
          "latitude": "40.7608",
          "longitude": "-111.8910"
        },
        "geoRadius": "500000"
      },
      "areaServed": [
        "Utah",
        "California", 
        "Nevada",
        "Arizona",
        "Colorado",
        "Idaho",
        "Wyoming",
        "Oregon"
      ]
    }
    </script>
    
    <!-- Google Fonts with display=swap for better performance -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    
    <!-- Font Awesome with integrity and crossorigin for security -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    
    <!-- Main CSS -->
    <link rel="icon" href="/zblogo.png" type="image/png" />

    <!-- Google Tag Manager -->
    {gtmId && <script set:html={gtmScript} />}
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src={`https://www.googletagmanager.com/ns.html?id=${gtmId}`}
        height="0"
        width="0"
        style="display:none;visibility:hidden"></iframe></noscript
    >
    <!-- End Google Tag Manager (noscript) -->

    <slot />
  </body>

  <script src="/js/main.js" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js', { scope: '/' })
          .then(registration => {
            console.log('SW registered successfully: ', registration);
          })
          .catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</html>
