---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
---

<Layout
  title="Contact Zero Barriers | Start Your Revenue Growth Transformation"
  description="Ready to transform your revenue growth? Contact Zero Barriers for a free consultation. Our proven methodologies deliver rapid, substantial, and sustainable results. Schedule your transformation assessment today."
>
  <body>
    <Header />

    <!-- Page-specific Google Analytics tracking -->
    <script>
      if (typeof window !== 'undefined' && typeof window.gtag !== 'undefined') {
        window.gtag('event', 'page_view', {
          page_title: 'Contact',
          page_location: window.location.href,
          custom_map: {
            'custom_dimension1': 'contact_page'
          }
        });
      }
    </script>

    <!-- Contact Hero -->
    <section class="contact-hero">
      <div class="container">
        <div class="section-title">
          <h1>Start Your Transformation</h1>
          <p>Ready to eliminate barriers and achieve breakthrough growth?</p>
        </div>
        <div class="contact-img">
          <img src="/images/mountain-sunset.png" alt="Contact visualization" />
        </div>
      </div>
    </section>

    <!-- Contact Info & Form -->
    <section style="background: var(--light-gray); padding: 80px 0 40px">
      <div class="container contact-main">
        <div class="contact-info">
          <h2
            style="font-size: 26px; color: var(--primary); margin-bottom: 20px"
          >
            Get in Touch
          </h2>
          <p>
            Ready to explore how Zero Barriers can help you achieve rapid,
            substantial, and sustainable growth? Complete the form to
            start the conversation.
          </p>
          <div class="contact-person">
            <div class="contact-person-img">
              <i class="fas fa-user-tie"></i>
            </div>
            <div class="contact-person-details">
              <strong>Shayne Roy</strong>
              <span>Founder, Zero Barriers</span>
            </div>
          </div>
          <ul class="contact-details-list">
            <li>
              <i class="fas fa-envelope"></i>
              <a href="mailto:sk@zerobarriers.io">sk@zerobarriers.io</a>
            </li>
            <li>
              <i class="fas fa-phone"></i>
              <a href="tel:8019970457">801-997-0457</a>
            </li>
            <li>
              <i class="fab fa-instagram"></i>
              <a
                href="https://www.instagram.com/zerobarriersinc"
                target="_blank">Instagram</a
              >
            </li>
            <li>
              <i class="fab fa-facebook-f"></i>
              <a href="https://www.facebook.com/zerobarriers" target="_blank"
                >Facebook</a
              >
            </li>
            <li>
              <i class="fab fa-linkedin"></i>
              <a
                href="https://www.linkedin.com/company/zerobarriers"
                target="_blank">LinkedIn</a
              >
            </li>
          </ul>
        </div>
        <form
          id="contact-form"
          class="contact-form"
          autocomplete="off"
          action="#"
          method="POST"
        >
          <!-- Honeypot field for spam protection -->
          <input
            type="text"
            name="website"
            style="display:none"
            tabindex="-1"
            autocomplete="off"
          />
          
          <!-- Hidden timestamp for bot detection -->
          <input
            type="hidden"
            name="form-start-time"
            value=""
            id="form-start-time"
          />
          
          <label for="name">Full Name <span class="required">*</span></label>
          <input type="text" id="name" name="name" autocomplete="name" required />
          
          <label for="email">Email Address <span class="required">*</span></label>
          <input type="email" id="email" name="email" autocomplete="email" required />
          
          <label for="company">Company</label>
          <input type="text" id="company" name="company" autocomplete="organization" />
          
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone" autocomplete="tel" />
          
          <label for="message">Message <span class="required">*</span></label>
          <textarea id="message" name="message" autocomplete="off" required rows="5"></textarea>
          
          <!-- Cloudflare Turnstile CAPTCHA - Enhanced Security -->
    <div class="cf-turnstile" 
         data-sitekey="0x4AAAAAAB3leLaMnnM_ISQ0"
               data-theme="light"
               data-size="normal"
               data-retry="auto"
               data-retry-interval="8000"
               data-refresh-expired="auto"
               data-language="en">
          </div>
          <div class="text-xs text-gray-500 mt-2 text-center">
            This site is protected by Cloudflare Turnstile
          </div>
          
          <button type="submit" class="submit-btn cta-button">
            <span class="btn-text">Send Message</span>
            <span class="btn-loading" style="display:none">Sending...</span>
          </button>
        </form>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
      <div class="container cta-content">
        <h2>Transform Your Business with Purpose</h2>
        <p>
          Discover how our integrated approach can help you achieve rapid,
          substantial, and sustainable growth.
        </p>
        <a href="/contact" class="white-cta">Schedule a Call</a>
        <div>
          <a href="/case-studies" class="secondary-white-cta"
            >Explore Our Case Studies <i class="fas fa-arrow-right"></i></a
          >
        </div>
      </div>
    </section>

    <Footer />

    <!-- Include Turnstile script -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    
    <!-- Form handling script -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Set form start time for bot detection
        const formStartTime = document.getElementById('form-start-time');
        if (formStartTime) {
          formStartTime.value = Date.now().toString();
        }
        
        const form = document.getElementById('contact-form') as HTMLFormElement;
        if (form) {
          form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.submit-btn') as HTMLButtonElement;
            const btnText = submitBtn?.querySelector('.btn-text') as HTMLSpanElement;
            const btnLoading = submitBtn?.querySelector('.btn-loading') as HTMLSpanElement;
            
            if (!submitBtn || !btnText || !btnLoading) {
              console.error('Form elements not found');
              return;
            }
            
            // Show loading state
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';
            submitBtn.disabled = true;
            
            try {
              const formData = new FormData(this);
              
              // Add Turnstile response
              const turnstileResponse = document.querySelector('[name="cf-turnstile-response"]') as HTMLInputElement;
              if (turnstileResponse) {
                formData.append('cf-turnstile-response', turnstileResponse.value);
              }
              
              const response = await fetch('/api/contact', {
                method: 'POST',
                body: formData
              });
              
              if (response.ok) {
                // Success message
                this.innerHTML = '<div class="success-message text-center p-6 bg-green-50 border border-green-200 rounded-lg"><h3 class="text-green-800 font-semibold text-lg mb-2">Thank you!</h3><p class="text-green-700">Your message has been sent successfully. We&apos;ll get back to you within 24 hours.</p></div>';
              } else {
                throw new Error('Failed to send message');
              }
              
            } catch (error) {
              console.error('Form submission error:', error);
              alert('Sorry, there was an error sending your message. Please try again.');
              
              // Reset form state
              btnText.style.display = 'inline';
              btnLoading.style.display = 'none';
              submitBtn.disabled = false;
            }
          });
        }
      });
    </script>
  </body>
</Layout>
